<?php require('includes/header.php'); ?>

<?php 
include("includes/config.php");


if(isset($_POST["find"])){
    $find = $_POST["find"];
    $products = mysqli_query($connection,"SELECT * FROM products WHERE title like '%$find%' or brand like '%$find%' or model like '%$find%'");
}
else if(isset($_GET["categories"])){
    $category = $_GET["categories"];
    $products = mysqli_query($connection,"SELECT * FROM products where category = '$category'");
}
else{
    $products = mysqli_query($connection,"SELECT * FROM products");
}
?>
<?php 
    if(isset($products)){
        $control = false;
        echo '
        <div class="row">
        ';
        while($product = mysqli_fetch_array($products)){
            echo '
            <a href="/en/productdetails?id='.$product["product_id"].'&category='.$product["category"].'&model='.$product["model"].'&page=1">
            <div class="col-md-3 col-sm-6" style="margin-left:10px;margin-top:10px;">
            <div class="card" style="width: 18rem;">
            <h5 class="card-title" style="margin-top:5px;text-align:center;">'.$product["model"].'<small> | '.$product["brand"].'</small></h5>    
            <img src="/static/media/'.$product["product_image"].'" width="100" height="250" class="card-img-top" alt="...">
            <div class="card-body">
                <p class="card-text" style="text-align:center;color:black;">'.$product["subtitle"].'</p>
            </div>
            </div>
            </div>
            </a> 
            ';
            $control = true;
        }
        if(!$control){
            echo'
            <div class="alert alert-danger" style="margin-bottom:200px;">Product not found.</div>
            <div class="row">
        ';
        }
    }
?>
</div>

<?php require('includes/footer.php'); ?>