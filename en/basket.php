<?php require('includes/header.php'); ?>
 <div class="card">
  <div class="card-body">
    <H5>MY BASKET</H5><hr>
    <?php include("includes/loginrequired.php"); ?>
        <div class="row">  
            <div class="col-md-8">
                <?php
                    if(!isset($_SESSION["basket"])) echo'<div class="alert alert-warning">Basket is empty!</div>';
                    else{
                        $totalPrice = 0;
                        echo'
                        <div class="card-body">   
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Products</h5><small style="float:right;font-weight:bold;">Remove to basket</small><br>
                        ';
                        $control = false;
                        foreach($_SESSION["basket"] as $product){
                            if($product){
                                $control = true;
                            }
                            echo'
                            <div style="margin-top:10px;">
                                <div class="media">
                                    <img src="/static/media/avatar/avatar.png" class="mr-3" width="110" height="100">
                                    <div class="media-body">
                                        <p>'.$product["brand"].' | '.$product["model"].'</p>';
                                        $price = (int)$product["price"] * (int)$product["piece"];
                                        $totalPrice += $price;
                                        echo'<p>'.$product["price"].' x '.$product["piece"].' = '.$price.'</p>
                                    </div>
                                    <a href="/deletebasketcontroller?removeBrand='.$product["brand"].'&removeModel='.$product["model"].'&lang=en" style="float:right;"><img src="../static/media/delete_icon.png" width="15" height="15"/></a>
                                </div>
                            </div>';
                        }
                        if(!$control){
                            echo'<div class="alert alert-warning">Basket is empty!</div>'; 
                        }
                        else{
                            echo'
                            <div style="margin-top:10px;">
                                <button type="submit" class="btn btn-info">Buy</button>
                                <small>Total Price: '.$totalPrice.' â‚º (with the inclusion of KDV)</small>
                            </div>
                        ';
                        }
                    }
                ?>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<?php require('includes/footer.php'); ?>